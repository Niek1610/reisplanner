import{s as _,a as p,u as g,g as w,b as $,o as v}from"../chunks/scheduler.CoCxny8d.js";import{S,i as D,e as b,c as y,a as C,d,m as R,g as q,k as A,p as k}from"../chunks/index.B5RvqOIF.js";import{b as E,d as f,c as m,g as I,s as L,e as M}from"../chunks/store.BWPk7t4-.js";function P(i){let s,n;const l=i[1].default,e=p(l,i,i[0],null);return{c(){s=b("div"),e&&e.c(),this.h()},l(t){s=y(t,"DIV",{class:!0});var a=C(s);e&&e.l(a),a.forEach(d),this.h()},h(){R(s,"class","mainContainer svelte-v2dqgw")},m(t,a){q(t,s,a),e&&e.m(s,null),n=!0},p(t,[a]){e&&e.p&&(!n||a&1)&&g(e,l,t,t[0],n?$(l,t[0],a,null):w(t[0]),null)},i(t){n||(A(e,t),n=!0)},o(t){k(e,t),n=!1},d(t){t&&d(s),e&&e.d(t)}}}function T(i,s,n){let{$$slots:l={},$$scope:e}=s;const t=["/"];let a;return v(()=>{console.log("mounting"),E.onAuthStateChanged(async o=>{const u=window.location.pathname;if(!o&&!t.includes(u)){window.location.href="/";return}if(o&&u=="/"){window.location.href="/homepage";return}if(!o)return;const h=f(m,"user",o.uid),c=await I(h);if(c.exists())a=c.data();else{const r=f(m,"user",o.uid);a={email:o.email,uid:o.uid},await L(r,a,{merge:!0})}M.update(r=>({...r,user:o,data:a,loading:!1}))})}),i.$$set=o=>{"$$scope"in o&&n(0,e=o.$$scope)},[e,l]}class B extends S{constructor(s){super(),D(this,s,T,P,_,{})}}export{B as component};
